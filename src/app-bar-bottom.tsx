import { Component, createElement } from "react";
import { Link } from "react-router-dom";
import { authConnector, PropsWithReduxAuth } from "./redux/store";
import { FittedBox } from "./widgets/box";

export function AppBarBottom() {
  return createElement(authConnector(_AppBarBottom));
}
export class _AppBarBottom extends Component<PropsWithReduxAuth> {
  render() {
    return (
      <ul className="bottom-bar-inner d-flex main-axis-between list-unstyled px-30p">
        <li className="text-center">
          <AppBarBottomIcon linkTo="/" icon={iconStack} label="Explore" />
        </li>
        <li className="text-center">
          <AppBarBottomIcon linkTo="/explore" icon={iconSearch} label="Search" />
        </li>
        <li className="text-center">
          <AppBarBottomIcon linkTo="/explore" icon={iconPlus} label="Post" />
        </li>
        <li className="text-center">
          <AppBarBottomIcon linkTo="/explore" icon={iconMessage} label="Message" />
        </li>
        <li className="text-center">
          <AppBarBottomIcon
            linkTo="/login"
            icon={this.props.auth.data?.profileImage ? null : iconProfile}
            image={this.props.auth.data?.profileImage}
            label={this.props.auth.status === 'loggedIn' && this.props.auth.data ? 'Profile' : 'Login'}
          />
        </li>
      </ul>
    );
  }
}

class AppBarBottomIcon extends Component<{ linkTo: string; icon?: string|null; image?: string, label: string; }> {
  render() {
    return (
      <Link to={this.props.linkTo} style={{ color: 'inherit' }}>
        {
          this.props.icon ?
            <div
              className="d-inline-block w-20p icon"
              dangerouslySetInnerHTML={{ __html: this.props.icon }}
            ></div> : null
        }
        {
          this.props.image ?
            <div className="d-inline-block w-20p h-20p rounded-4p overflow-hidden">
              <FittedBox.Img image={this.props.image}></FittedBox.Img>
            </div> : null
        }
        <div className="caption body-small-md">{this.props.label}</div>
      </Link>
    );
  }
}

const iconStack = `
  <svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-4.24982,-4.25)">
      <path d="M19.695,4.315C19.889,4.228 20.111,4.228 20.305,4.315L35.305,10.981C35.576,11.102 35.75,11.37 35.75,11.667C35.75,11.963 35.576,12.232 35.305,12.352L20.305,19.019C20.111,19.105 19.889,19.105 19.695,19.019L4.695,12.352C4.425,12.232 4.25,11.963 4.25,11.667C4.25,11.37 4.425,11.102 4.695,10.981L19.695,4.315ZM6.847,11.667L20,17.513L33.153,11.667L20,5.821L6.847,11.667ZM4.315,19.695C4.483,19.317 4.926,19.146 5.305,19.315L20,25.846L34.695,19.315C35.074,19.146 35.517,19.317 35.685,19.695C35.854,20.074 35.683,20.517 35.305,20.685L20.305,27.352C20.111,27.438 19.889,27.438 19.695,27.352L4.695,20.685C4.317,20.517 4.146,20.074 4.315,19.695ZM5.305,27.648C4.926,27.48 4.483,27.65 4.315,28.029C4.146,28.407 4.317,28.851 4.695,29.019L19.695,35.685C19.889,35.772 20.111,35.772 20.305,35.685L35.305,29.019C35.683,28.851 35.854,28.407 35.685,28.029C35.517,27.65 35.074,27.48 34.695,27.648L20,34.179L5.305,27.648Z" style="fill:white;"/>
    </g>
  </svg>`

const iconSearch = `
  <svg width="100%" height="100%" viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-4.25,-4.25)">
      <path d="M5.75,18.333C5.75,11.384 11.384,5.75 18.333,5.75C25.283,5.75 30.917,11.384 30.917,18.333C30.917,25.283 25.283,30.917 18.333,30.917C11.384,30.917 5.75,25.283 5.75,18.333ZM18.333,4.25C10.555,4.25 4.25,10.555 4.25,18.333C4.25,26.111 10.555,32.417 18.333,32.417C21.954,32.417 25.255,31.05 27.75,28.805C27.767,28.826 27.784,28.845 27.803,28.864L32.803,33.864C33.096,34.157 33.571,34.157 33.864,33.864C34.157,33.571 34.157,33.096 33.864,32.803L28.864,27.803C28.845,27.784 28.826,27.767 28.805,27.75C31.05,25.255 32.417,21.954 32.417,18.333C32.417,10.555 26.111,4.25 18.333,4.25Z" style="fill:white;"/>
    </g>
  </svg>`

const iconProfile = `
  <svg width="100%" height="100%" viewBox="0 0 35 35" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-2.58333,-2.58334)">
      <path d="M15.275,2.583L24.725,2.583C27.504,2.583 29.667,2.583 31.35,2.81C33.067,3.041 34.398,3.519 35.44,4.56C36.481,5.602 36.959,6.933 37.19,8.65C37.417,10.334 37.417,12.496 37.417,15.275L37.417,24.725C37.417,27.504 37.417,29.667 37.19,31.35C36.959,33.067 36.481,34.398 35.44,35.44C34.398,36.481 33.067,36.96 31.35,37.19C29.667,37.417 27.504,37.417 24.725,37.417L15.275,37.417C12.496,37.417 10.334,37.417 8.65,37.19C6.933,36.96 5.602,36.481 4.56,35.44C3.519,34.398 3.041,33.067 2.81,31.35C2.583,29.667 2.583,27.504 2.583,24.725L2.583,15.275C2.583,12.496 2.583,10.334 2.81,8.65C3.041,6.933 3.519,5.602 4.56,4.56C5.602,3.519 6.933,3.041 8.65,2.81C10.334,2.583 12.496,2.583 15.275,2.583ZM8.85,4.296C7.299,4.505 6.337,4.905 5.621,5.621C4.905,6.337 4.505,7.299 4.296,8.85C4.085,10.422 4.083,12.484 4.083,15.333L4.083,24.667C4.083,27.516 4.085,29.578 4.296,31.15C4.505,32.701 4.905,33.663 5.621,34.379C6.337,35.095 7.299,35.495 8.85,35.704C10.422,35.915 12.484,35.917 15.333,35.917L24.667,35.917C27.516,35.917 29.578,35.915 31.15,35.704C32.701,35.495 33.663,35.095 34.379,34.379C35.095,33.663 35.495,32.701 35.704,31.15C35.915,29.578 35.917,27.516 35.917,24.667L35.917,15.333C35.917,12.484 35.915,10.422 35.704,8.85C35.495,7.299 35.095,6.337 34.379,5.621C33.663,4.905 32.701,4.505 31.15,4.296C29.578,4.085 27.516,4.083 24.667,4.083L15.333,4.083C12.484,4.083 10.422,4.085 8.85,4.296ZM17.735,20.917L22.265,20.917C22.637,20.917 22.874,20.917 23.081,20.935C25.377,21.136 27.198,22.956 27.399,25.253C27.417,25.46 27.417,25.697 27.417,26.069L27.417,26.144C27.417,26.318 27.417,26.453 27.406,26.573C27.29,27.903 26.236,28.957 24.906,29.073C24.786,29.083 24.651,29.083 24.477,29.083L15.523,29.083C15.349,29.083 15.214,29.083 15.094,29.073C13.764,28.957 12.71,27.903 12.594,26.573C12.583,26.453 12.583,26.318 12.583,26.144L12.583,26.069C12.583,25.697 12.583,25.46 12.601,25.253C12.802,22.956 14.623,21.136 16.919,20.935C17.126,20.917 17.363,20.917 17.735,20.917ZM17.778,22.417C17.349,22.417 17.183,22.417 17.05,22.429C15.479,22.567 14.233,23.812 14.096,25.383C14.084,25.517 14.083,25.683 14.083,26.111C14.083,26.333 14.084,26.396 14.088,26.442C14.141,27.047 14.62,27.526 15.224,27.579C15.271,27.583 15.333,27.583 15.556,27.583L24.444,27.583C24.667,27.583 24.73,27.583 24.776,27.579C25.38,27.526 25.859,27.047 25.912,26.442C25.916,26.396 25.917,26.333 25.917,26.111C25.917,25.683 25.916,25.517 25.904,25.383C25.767,23.812 24.521,22.567 22.95,22.429C22.817,22.417 22.651,22.417 22.222,22.417L17.778,22.417ZM17.417,13.333C17.417,11.907 18.573,10.75 20,10.75C21.427,10.75 22.583,11.907 22.583,13.333C22.583,14.76 21.427,15.917 20,15.917C18.573,15.917 17.417,14.76 17.417,13.333ZM20,9.25C17.745,9.25 15.917,11.078 15.917,13.333C15.917,15.589 17.745,17.417 20,17.417C22.255,17.417 24.083,15.589 24.083,13.333C24.083,11.078 22.255,9.25 20,9.25Z" style="fill:white;"/>
    </g>
  </svg>`

const iconPlus = `
  <svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-4.25,-4.25)">
      <path d="M5.75,20C5.75,12.13 12.13,5.75 20,5.75C27.87,5.75 34.25,12.13 34.25,20C34.25,27.87 27.87,34.25 20,34.25C12.13,34.25 5.75,27.87 5.75,20ZM20,4.25C11.302,4.25 4.25,11.302 4.25,20C4.25,28.699 11.302,35.75 20,35.75C28.699,35.75 35.75,28.699 35.75,20C35.75,11.302 28.699,4.25 20,4.25ZM20.75,13.333C20.75,12.919 20.414,12.583 20,12.583C19.586,12.583 19.25,12.919 19.25,13.333L19.25,19.25L13.333,19.25C12.919,19.25 12.583,19.586 12.583,20C12.583,20.414 12.919,20.75 13.333,20.75L19.25,20.75L19.25,26.667C19.25,27.081 19.586,27.417 20,27.417C20.414,27.417 20.75,27.081 20.75,26.667L20.75,20.75L26.667,20.75C27.081,20.75 27.417,20.414 27.417,20C27.417,19.586 27.081,19.25 26.667,19.25L20.75,19.25L20.75,13.333Z" style="fill:white;"/>
    </g>
  </svg>`;

const iconMessage = `
  <svg width="100%" height="100%" viewBox="0 0 32 29" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-4.25,-5.91666)">
      <path d="M9.768,5.917L30.232,5.917C31.045,5.917 31.701,5.917 32.231,5.96C32.778,6.005 33.258,6.099 33.703,6.325C34.408,6.685 34.982,7.259 35.341,7.964C35.568,8.408 35.662,8.889 35.707,9.435C35.75,9.966 35.75,10.622 35.75,11.435L35.75,33.333C35.75,33.593 35.615,33.835 35.394,33.971C35.173,34.108 34.897,34.12 34.665,34.004L29.349,31.347C28.827,31.086 28.629,30.988 28.425,30.92C28.235,30.856 28.039,30.809 27.84,30.781C27.627,30.752 27.406,30.75 26.823,30.75L9.768,30.75C8.955,30.75 8.299,30.75 7.769,30.707C7.222,30.662 6.742,30.568 6.298,30.341C5.592,29.982 5.018,29.408 4.659,28.703C4.432,28.258 4.338,27.778 4.293,27.232C4.25,26.701 4.25,26.045 4.25,25.232L4.25,11.435C4.25,10.622 4.25,9.966 4.293,9.435C4.338,8.889 4.432,8.408 4.659,7.964C5.018,7.259 5.592,6.685 6.298,6.325C6.742,6.099 7.222,6.005 7.769,5.96C8.299,5.917 8.955,5.917 9.768,5.917ZM7.891,7.455C7.437,7.492 7.176,7.561 6.979,7.662C6.555,7.878 6.211,8.222 5.995,8.645C5.895,8.843 5.825,9.103 5.788,9.557C5.751,10.02 5.75,10.614 5.75,11.467L5.75,25.2C5.75,26.052 5.751,26.647 5.788,27.109C5.825,27.563 5.895,27.824 5.995,28.022C6.211,28.445 6.555,28.789 6.979,29.005C7.176,29.105 7.437,29.174 7.891,29.212C8.353,29.249 8.948,29.25 9.8,29.25L26.876,29.25C27.389,29.25 27.719,29.25 28.048,29.296C28.339,29.337 28.625,29.404 28.904,29.498C29.218,29.604 29.514,29.752 29.973,29.981L30.02,30.005L34.25,32.12L34.25,11.467C34.25,10.614 34.249,10.02 34.212,9.557C34.175,9.103 34.105,8.843 34.005,8.645C33.789,8.222 33.445,7.878 33.022,7.662C32.824,7.561 32.563,7.492 32.109,7.455C31.647,7.417 31.052,7.417 30.2,7.417L9.8,7.417C8.948,7.417 8.353,7.417 7.891,7.455ZM10.917,13.333C10.917,12.919 11.253,12.583 11.667,12.583L25,12.583C25.414,12.583 25.75,12.919 25.75,13.333C25.75,13.748 25.414,14.083 25,14.083L11.667,14.083C11.253,14.083 10.917,13.748 10.917,13.333ZM11.667,19.25C11.253,19.25 10.917,19.586 10.917,20C10.917,20.414 11.253,20.75 11.667,20.75L18.333,20.75C18.748,20.75 19.083,20.414 19.083,20C19.083,19.586 18.748,19.25 18.333,19.25L11.667,19.25Z" style="fill:white;"/>
    </g>
  </svg>`;